<div id="proxyID">
    Proxy
	
	<script type='text/javascript'>

		//===============================================
		//---------------- Load Iframe ------------------
		//===============================================
		var calcProxyFunct = 'https://calcproxyfunction.azurewebsites.net/calcProxy/400/20';
		var calcLogicApp = 'https://prod-08.southcentralus.logic.azure.com/workflows/d477d861d3724a4e84f84f09b38759cc/triggers/manual/paths/invoke/calc/a/10/b/2?api-version=2016-10-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=_RnUBhOPbe0ffytYkGTVVCYX5aNkIuJyVk0jVa0oFZY';
	
		//var mainURL = 'https://jpetchan-cdn-token.azurewebsites.net/api/cdntoken2';
		var mainURL = calcProxyFunct;
		var proxyIframe = document.getElementById("proxyIframe");
		proxyIframe.src = mainURL;
		
		//===============================================
		
		
		//user token
		var userToken = angular.element(document.getElementById('proxyID')).scope().getTokenHome();
		console.log('User token = '+userToken);
		
		/*var xhr = createCORSRequest('GET',mainURL);
		xhr.setRequestHeader ("Authorization", "Bearer " + userToken);
		xhr.setRequestHeader ("Access-Control-Allow-Origin","*");
		xhr.setRequestHeader ("Access-Control-Allow-Credentials",true);
		xhr.send();*/
		
		
		//===============================================
		//---------------- Json working -----------------
		//===============================================
		/*testAjaxFunction(mainURL,userToken).success(function(data){
				//var mainURL = 'https://sukanya-tst-functionapp-demoproxy.azurewebsites.net/calc/100/20';
				
				console.log('data = '+data);
				console.log('data value = '+data.value);
				console.log('data text = '+data.text);
				console.log('json stringify = '+JSON.stringify(data));
		});
			
			
		 function testAjaxFunction (mainURL,userToken){
				return $.ajax({
				url: mainURL,
				headers:{
					'Authorization':'Bearer '+userToken,
					'Access-Control-Allow-Origin':'*',
					'Access-Control-Allow-Methods':'GET',
				},
				type: "GET",
				success: function (data, textStatus, jqXHR){
					console.log('Success Working !!');
					console.log('-----------------------------------------');
					console.log('data = '+data);
					console.log('textStatus = '+textStatus);
					console.log('jqXHR = '+jqXHR);
				},
				error: function(xhr, textStatus, errorThrown, response, status, error) { 
					console.log('getCDNToken Error!!');
					console.log('xhr = '+xhr);
					console.log('textStatus = '+textStatus);
					console.log('errorThrown = '+errorThrown);
					console.log('response = '+response);
					console.log('status = '+status);
					console.log('error = '+error);
				},
				});
			}*/
			//=========================================
			//               Post man
			//=========================================
			/*alert('Post man');
			var settings = {
			  "async": true,
			  "crossDomain": true,
			  "url": "https://calcproxyfunction.azurewebsites.net/calcProxy/200/20",
			  "method": "GET",
			  "headers": {
				"authorization": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IjJLVmN1enFBaWRPTHFXU2FvbDd3Z0ZSR0NZbyIsImtpZCI6IjJLVmN1enFBaWRPTHFXU2FvbDd3Z0ZSR0NZbyJ9.eyJhdWQiOiI4MzA3ZDY2ZS0xODRmLTQzN2YtYWY3My04ODcyOTAwOWIyOTMiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8zZTBiNmNiZC00OTU5LTRkMDEtODFiZi1jZTg4M2RkYWJkOTYvIiwiaWF0IjoxNTEwMjg0OTA5LCJuYmYiOjE1MTAyODQ5MDksImV4cCI6MTUxMDI4ODgwOSwiYWlvIjoiQVNRQTIvOEdBQUFBVHRmeTZXZXp4R0lRTWdyS0o2dkRIZ0d5VHpyNzFXZFAzQ2t0cTZla3hiRT0iLCJhbXIiOlsicHdkIl0sImZhbWlseV9uYW1lIjoiVG9uZ3Nhd2FuZyIsImdpdmVuX25hbWUiOiJLaXR0aXBvbmciLCJpcGFkZHIiOiIxMDEuMTA5LjEyOS40NiIsIm5hbWUiOiJUb25nc2F3YW5nIEtpdHRpcG9uZyAtIFRvZ2V0aGVyIFRIIiwibm9uY2UiOiI0NmQ3OTEwNi0yZDQ0LTQ1ZGQtYmI3NC1hNDc4MTU5MTdiNjEiLCJvaWQiOiI2ZjIxMmU4Ny0wZGZhLTQyZGQtYTgyYi1jMzg3ZTNlNDRlOTYiLCJzdWIiOiJiN1BsaXlzZ0ZhdWNSY1lQMXpUaHB4OXBRSFdZaGVYOF9KekUwc1ZFd2dNIiwidGlkIjoiM2UwYjZjYmQtNDk1OS00ZDAxLTgxYmYtY2U4ODNkZGFiZDk2IiwidW5pcXVlX25hbWUiOiJrLnRvbmdzYXdhbmdAdG9nZXRoZXJ0ZWFtLmNvLnRoIiwidXBuIjoiay50b25nc2F3YW5nQHRvZ2V0aGVydGVhbS5jby50aCIsInZlciI6IjEuMCJ9.IyOjndEcbLwVHZps_2z-zv86r1T-OU8qBrmx5RVGiIoWyioFdnWNg_uu4ZSYD5UBxGC14s68VlB5b9HIJ_QaYoyC4es_rl2CkMNVkXl8BSn2yQqrWaurRHUYegIr0GeS4U5o760aouV7O_ROQ7C_Zo3s0jpe9Aq6hXcHOIJAX1lWKj75LxdOBGNokMPnOHhRUIhJhwMBd1bwXtXhkKrELFpxYClkejQQC8ufHQ0NyucXbRwcjJCt3CGZIY1PRKlbdOZE4QMJBHCHs4H7druiHZ4COCvcFtL2-4Myn2U-dait5dHxobAEIMJ4xLZAxbSPMhigBGrA2zSoofWjId8ARg",
				"cache-control": "no-cache",
				"postman-token": "00322096-bde6-ade0-2c45-afd09092b436"
			  }
			}

			$.ajax(settings).done(function (response) {
			  console.log(response);
			});*/
			
			//=========================================
			//                Json Tun
			//=========================================
			var url = "https://calcproxyfunction.azurewebsites.net/calcProxy/200/2"
            //var json = null;
            var getsetting = {
                'async': false,
                'global': false,
                'url': url,
                "method": "GET",
                "headers": {
                    "cache-control": "no-cache",
                    "Access-Control-Allow-Origin": "*",
                    "Access-Control-Allow-Methods": "GET, POST, PATCH, PUT, DELETE, OPTIONS",
                    "Access-Control-Allow-Headers": "Origin, Content-Type, Authorization",
                    "Authorization": "Bearer " + userToken
                }
            }
            $.ajax(getsetting).done(function (data) {
                console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>>>> CDN DONE");
                console.log(data);
                //json = data.cdn;
            }).fail(function (err){
                console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>>>> CDN FAILED");
                console.log(err);
            });
           // return json;
			
			
	</script>
	
	<iframe  id="proxyIframe" width="1025" height="350" sandbox="allow-same-origin allow-scripts allow-popups allow-forms">
	
	</iframe>
</div>

<!-- <div id="proxyFormIO">
	<script type='text/javascript'>
		Formio.createForm(document.getElementById('proxyFormIO'), 'https://gtdcbfvemyajgpb.form.io/lfdemoproxycalc');
	</script>		
</div> -->